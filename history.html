<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bardo PM Dashboard — History</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyDUfnE-oYtu7la0ZxabPXYjEeQCJzG15Sw",
      authDomain: "bardo-dashboard.firebaseapp.com",
      projectId: "bardo-dashboard",
      storageBucket: "bardo-dashboard.firebasestorage.app",
      messagingSenderId: "864872286026",
      appId: "1:864872286026:web:1aecf705db93b7ad2ea3b3"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
<style>
  .readable-history { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
  .history-card { padding: 20px; border-radius: 12px; background:#fafafa; box-shadow:0 2px 8px rgba(0,0,0,0.08); }
  .history-card h2 { margin-bottom: 10px; font-size: 1.3rem; border-bottom:1px solid #ddd; padding-bottom:6px; }
  .history-block { padding: 12px; background:#fff; border-radius:8px; max-height:300px; overflow-y:auto; border:1px solid #eee; line-height:1.45; }
  .history-block::-webkit-scrollbar { width: 6px; }
  .history-block::-webkit-scrollbar-thumb { background:#bbb; border-radius:3px; }
  @media(max-width:900px){ .readable-history { grid-template-columns:1fr; } }
</style>
<style>
  .enhanced-history { display: grid; grid-template-columns: 1fr 1fr; gap: 22px; padding: 22px; }
  .history-card { border-radius: 14px; padding: 18px; background: #fafafa; box-shadow:0 3px 12px rgba(0,0,0,0.08); transition:0.3s; }
  .history-card:hover { transform: translateY(-2px); }
  .history-block { padding: 12px; background:#fff; border-radius:8px; max-height:340px; overflow-y:auto; border:1px solid #eee; line-height:1.45; }

  /* Filters */
  .history-filters { grid-column: 1 / -1; }
  .filter-row { display:flex; gap:10px; }
  .filter-row input, .filter-row select { padding:10px; border-radius:6px; border:1px solid #ccc; font-size:1rem; }

  /* Collapsible sections */
  .collapsible .collapse-header { cursor:pointer; padding:6px 0; border-bottom:1px solid #ddd; }
  .collapse-content { display:none; margin-top:10px; }
  .collapsible.open .collapse-content { display:block; }

  /* Category colors */
  [data-category="milestones"] h2 { color:#2a73ff; }
  [data-category="weekly"] h2 { color:#c92aff; }
  [data-category="resourcing"] h2 { color:#ff7a00; }
  [data-category="daily"] h2 { color:#009c6b; }

  @media(max-width:900px){ .enhanced-history { grid-template-columns: 1fr; } }
</style>
<style>
  .enhanced-history { display: grid; grid-template-columns: 1fr 1fr; gap: 22px; padding: 22px; }
  .history-card { border-radius: 14px; padding: 18px; background: #fafafa; box-shadow:0 3px 12px rgba(0,0,0,0.08); transition:0.3s; }
  .history-card:hover { transform: translateY(-2px); }
  .history-block { padding: 12px; background:#fff; border-radius:8px; max-height:340px; overflow-y:auto; border:1px solid #eee; line-height:1.45; }

  /* Filters */
  .history-filters { grid-column: 1 / -1; }
  .filter-row { display:flex; gap:10px; }
  .filter-row input, .filter-row select { padding:10px; border-radius:6px; border:1px solid #ccc; font-size:1rem; }

  /* Collapsible sections */
  .collapsible .collapse-header { cursor:pointer; padding:6px 0; border-bottom:1px solid #ddd; }
  .collapse-content { display:none; margin-top:10px; }
  .collapsible.open .collapse-content { display:block !important; }

  /* Category colors */
  [data-category="milestones"] h2 { color:#2a73ff; }
  [data-category="weekly"] h2 { color:#c92aff; }
  [data-category="resourcing"] h2 { color:#ff7a00; }
  [data-category="daily"] h2 { color:#009c6b; }

  @media(max-width:900px){ .enhanced-history { grid-template-columns: 1fr; } }
</style>

<script>
// Expand all collapsible sections on load
window.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.collapsible').forEach(sec => sec.classList.add('open'));
});
</script>
</head>
<body>
  <header class="topbar">
    <h1>History</h1>
    <div class="quarter-select-wrapper">
      <label for="history-quarter-select">Quarter:</label>
      <select id="history-quarter-select"></select>
    </div>
    <div class="week-select-wrapper">
      <label for="history-week-select">Week:</label>
      <select id="history-week-select"></select>
    </div>
  </header>

  <main class="history-layout enhanced-history">

    <!-- Search & Filter Bar -->
    <section class="history-filters card">
      <h2>Filters</h2>
      <div class="filter-row">
        <input id="history-search" type="text" placeholder="Search history..." />
        <select id="history-filter-person">
          <option value="">Filter by person</option>
          <option>Allison</option>
          <option>Christian</option>
          <option>Cyril</option>
          <option>Mike</option>
          <option>Ryszard</option>
          <option>SamL</option>
          <option>SamW</option>
        </select>
        <select id="history-filter-category">
          <option value="">Filter by category</option>
          <option>Materials</option>
          <option>Fabrication</option>
          <option>Durability</option>
          <option>ScaleUp</option>
          <option>Operations</option>
        </select>
      </div>
    </section>

    <!-- Milestones History (Collapsible) -->
    <section class="card history-card collapsible" data-category="milestones">
      <h2 class="collapse-header">Milestones History</h2>
      <div id="milestones-history" class="history-block collapse-content">Loading…</div>
    </section>

    <!-- Weekly Plans History (Collapsible) -->
    <section class="card history-card collapsible" data-category="weekly">
      <h2 class="collapse-header">Weekly Plans</h2>
      <div id="weekly-history" class="history-block collapse-content">Loading…</div>
    </section>

    <!-- Quarterly Resourcing (Collapsible) -->
    <section class="card history-card collapsible" data-category="resourcing">
      <h2 class="collapse-header">Quarterly Resourcing</h2>
      <div id="resourcing-history" class="history-block collapse-content">Loading…</div>
    </section>

    <!-- Daily Logs (Collapsible) -->
    <section class="card history-card collapsible" data-category="daily">
      <h2 class="collapse-header">Daily Logs</h2>
      <div id="daily-history" class="history-block collapse-content">Loading…</div>
    </section>

</main>

  <script src="history.js"></script>
</body>
</html>
